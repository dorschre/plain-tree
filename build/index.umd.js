!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((r||self).plainTree={})}(this,function(r){var t=function(r){return r&&"data"in r?r.data:r},e=function(r){return Boolean(r&&r.children&&r.children.length)},n=function(){return function(r){for(var t="";t.length<36;)t+=Math.random().toString(36).substring(2,15);return t.slice(0,36)}()},i=function(r){return Array.isArray(r)&&r.length?r[0]:null},o=function(r,t){var e=t.disallowedKeys,n=void 0===e?[]:e;return Object.keys(r).filter(function(r){return!n.includes(r)}).reduce(function(t,e){return t[e]=r[e],t},{})},a=function r(t){var e=t.parent,n={data:t.data,children:t.children,id:t.id,parentId:null,value:t.value,label:t.label};return e&&(n.parentId=e.id),n.children=t.children.map(function(t){return r(t)}),n},h=function r(t){var e=t.parent,n=t.children,i={data:t.data,id:t.id,parentId:null,value:t.value,label:t.label};return e&&(i.parentId=e.id),0!==n.length&&(i.children=t.children.map(function(t){return r(t)})),i},u=function(r){if(null===r)return[1];var t=[1],n=[r],i=[];do{for(;n.length;){var o,a=n.pop();e(a)&&(o=i).push.apply(o,a.children)}i.length&&(t[t.length]=i.length);var h=[n,i];i=h[0],n=h[1]}while(n.length);return t},l=function(r,t){void 0===t&&(t=null);var n=[r],i=[],o=[[t(r)]];do{for(;n.length;){var a,h=n.pop();e(h)&&(a=i).push.apply(a,h.children)}i.length&&(o[o.length]=t?i.map(function(r){return t(r)}):i);var u=[n,i];i=u[0],n=u[1]}while(n.length);return o},s=/*#__PURE__*/function(){function r(r){void 0===r&&(r=null),this.root=void 0,this.root=r,this.root=r}var n=r.prototype;return n._traverse=function(r,t,n){for(var i,o=void 0===t?{}:t,a=o.some,h=o.every,u=o.returnBoolean,l=o.returnArray,s=[this.root],d=[],f=!1;s.length;){var c=s.shift();if(e(c)&&s[n].apply(s,c.children),a||h){var v=r(c);if(v&&l&&d.push(c),h&&!v||a&&v){f=!0,i=v;break}}else r(c)}if(h){if(u)return!f;if(l)return d}else if(a){if(u)return Boolean(i);if(l)return d}},n._traverseBreathFirst=function(r,t){return this._traverse(r,t,"push")},n._traverseDepthFirst=function(r,t){return this._traverse(r,t,"unshift")},n.traverseBreathFirst=function(r){this._traverseBreathFirst(r)},n.traverseDepthFirst=function(r){this._traverseDepthFirst(r)},n.someBreathFirst=function(r){return Boolean(this._traverseBreathFirst(r,{some:!0,returnBoolean:!0}))},n.someDepthFirst=function(r){return Boolean(this._traverseDepthFirst(r,{some:!0,returnBoolean:!0}))},n.everyBreathFirst=function(r){return Boolean(this._traverseDepthFirst(r,{every:!0,returnBoolean:!0}))},n.everyDepthFirst=function(r){return Boolean(this._traverseDepthFirst(r,{every:!0,returnBoolean:!0}))},n.findOneBreathFirst=function(r){var t=this._traverseBreathFirst(r,{some:!0,returnArray:!0});return i(t)},n.findOneDepthFirst=function(r){var t=this._traverseDepthFirst(r,{some:!0,returnArray:!0});return i(t)},n.findAllBreathFirst=function(r){var t=this._traverseBreathFirst(r,{every:!0,returnArray:!0});return Array.isArray(t)?t:[]},n.findAllDepthFirst=function(r){var t=this._traverseDepthFirst(r,{every:!0,returnArray:!0});return Array.isArray(t)?t:[]},n.flatMap=function(r){void 0===r&&(r=null);var t=[];return this._traverseBreathFirst(function(e){r&&t.push(r(e))||t.push(e)}),t},n.flattenData=function(){return this.flatMap(t)},n.flattenByHeight=function(r){return void 0===r&&(r=null),l(this.root,r)},n.flattenDataByHeight=function(){return this.flattenByHeight(t)},n.widthsByHeight=function(){return u(this.root)},n.nodesAtHeight=function(r){var t=this.root?[1]:[],n=[this.root];if(t.length===r)return n;var i=[];do{for(;n.length;){var o,a=n.pop();e(a)&&(o=i).push.apply(o,a.children)}if(t.length===r)return i;i.length&&(t[t.length]=i.length);var h=[n,i];i=h[0],n=h[1]}while(n.length);return[]},n.countNodes=function(){return this.widthsByHeight().reduce(function(r,t){return r+t},0)},n.maxWidth=function(){return Math.max.apply(Math,this.widthsByHeight())},n.height=function(){return this.root?this.root.height():0},n.toJson=function(){return this.root?this.root.toJson():""},n.toObject=function(){return this.root?this.root.toObject():[]},r}(),d=/*#__PURE__*/function(){function r(r,t){var e=void 0===t?{}:t,i=e.id,o=e.parent;this.data=void 0,this.children=[],this.id=void 0,this.value=void 0,this.label=void 0,this.parent=void 0,this.id=void 0!==i?i:n(),this.parent=o||null,this.value=i,this.label="label"in r?r.label:i,this.data=r,this.children=[]}var t=r.prototype;return t.addChild=function(t,e){var n=new r(t,{id:(void 0===e?{}:e).id,parent:this});return this.children.push(n),n},t._removeChildren=function(r){var t=[];return this.children=this.children.filter(function(e){return!r(e)||(t.push(e),!1)}),t},t.removeChildren=function(r){return this._removeChildren(r)},t.removeChildrenByData=function(r){return this._removeChildren(function(t){return t.data===r})},t.removeChildrenById=function(r){return this._removeChildren(function(t){return t.id===r})},t.isLeaf=function(){return null!==this.parent&&!Boolean(this.children.length)},t.hasChildren=function(){return Boolean(this.children.length)},t.toJson=function(){var r=a(this);return JSON.stringify(r)},t.toObject=function(){var r=[];if(0!==this.children.length)for(var t=0;t<this.children.length;t++)r.push(h(this.children[t]));return r},t.depth=function(){if(this.parent){for(var r=0,t=this;t.parent;)r+=1,t=t.parent;return r}return 0},t.widthsByHeight=function(){return u(this)},t.height=function(){return this.widthsByHeight().length-1},t.flattenByHeight=function(r){return void 0===r&&(r=null),l(this,r)},r}(),f="id",c="parentId",v="children",p=function(r,t){var e=void 0===t?{}:t,n=e.idKey,i=void 0===n?f:n,o=e.parentIdKey,a=void 0===o?c:o,h=e.childrenKey,u=void 0===h?v:h,l=[],s={};return r.forEach(function(r){var t=r[i],e=r[a];s[t]=s[t]||[],r[u]=s[t],e?(s[e]=s[e]||[],s[e].push(r)):l.push(r)}),l},y=function(r,t,e){void 0===t&&(t=null);var n=void 0===e?{}:e,i=n.idKey,a=void 0===i?f:i,h=n.parentIdKey,u=n.childrenKey,l=o(r,{disallowedKeys:[a,void 0===h?c:h,void 0===u?v:u]});return t?t.addChild(l,{id:r[a]}):new d(l,{id:r[a]})},g=function r(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n={}),t.length){var i=n.childrenKey,o=void 0===i?v:i;t.forEach(function(t){var i=y(t,e,n);r(t[o],i,n)})}},B=function(r,t){if(void 0===t&&(t={}),!r.length)return new s;if(r.length>1)throw new Error("Converting an array to tree only accepts an array with 0 or 1 node currently");var e=t.childrenKey,n=void 0===e?v:e,i=r[0],o=y(i,null,t),a=new s(o);return g(i[n],o,t),a};r.Node=d,r.Tree=s,r.createNodes=g,r.createTreeArrayFromFlatArray=p,r.createTreeFromFlatArray=function(r,t){void 0===t&&(t={});var e=function(r,t){var e=void 0===t?{}:t,n=e.idKey,i=e.parentIdKey;if(n||i){var a=[].concat(n?[n]:[],i?[i]:[]);return r.map(function(r){var t=o(r,{disallowedKeys:a});return n&&(t[f]=r[n]),i&&(t[c]=r[i]),t})}return r}(r,t),n=p(e);if(n.length){if(n.length=1)return B(n);throw new Error("Converting an array to tree only accepts an array with 0 or 1 node currently")}return new s},r.createTreeFromTreeArray=B,r.filterObject=o,r.firstArrayElement=i,r.generateId=n,r.hasChildren=e,r.nodeData=t,r.nodesData=function(r){return r.map(t)},r.objectToNode=y});
//# sourceMappingURL=index.umd.js.map
