var r=function(r){return r&&"data"in r?r.data:r},t=function(t){return t.map(r)},n=function(r){return Boolean(r&&r.children&&r.children.length)},e=function(){return function(r){for(var t="";t.length<36;)t+=Math.random().toString(36).substring(2,15);return t.slice(0,36)}()},i=function(r){return Array.isArray(r)&&r.length?r[0]:null},o=function(r,t){var n=t.disallowedKeys,e=void 0===n?[]:n;return Object.keys(r).filter(function(r){return!e.includes(r)}).reduce(function(t,n){return t[n]=r[n],t},{})},h=function r(t){var n=t.parent,e={data:t.data,children:t.children,id:t.id,parentId:null};return n&&(e.parentId=n.id),e.children=t.children.map(function(t){return r(t)}),e},a=function(r){if(null===r)return[1];var t=[1],e=[r],i=[];do{for(;e.length;){var o,h=e.pop();n(h)&&(o=i).push.apply(o,h.children)}i.length&&(t[t.length]=i.length);var a=[e,i];i=a[0],e=a[1]}while(e.length);return t},u=function(r,t){void 0===t&&(t=null);var e=[r],i=[],o=[[t(r)]];do{for(;e.length;){var h,a=e.pop();n(a)&&(h=i).push.apply(h,a.children)}i.length&&(o[o.length]=t?i.map(function(r){return t(r)}):i);var u=[e,i];i=u[0],e=u[1]}while(e.length);return o},s=/*#__PURE__*/function(){function t(r){void 0===r&&(r=null),this.root=void 0,this.root=r,this.root=r}var e=t.prototype;return e._traverse=function(r,t,e){for(var i,o=void 0===t?{}:t,h=o.some,a=o.every,u=o.returnBoolean,s=o.returnArray,l=[this.root],d=[],f=!1;l.length;){var v=l.shift();if(n(v)&&l[e].apply(l,v.children),h||a){var c=r(v);if(c&&s&&d.push(v),a&&!c||h&&c){f=!0,i=c;break}}else r(v)}if(a){if(u)return!f;if(s)return d}else if(h){if(u)return Boolean(i);if(s)return d}},e._traverseBreathFirst=function(r,t){return this._traverse(r,t,"push")},e._traverseDepthFirst=function(r,t){return this._traverse(r,t,"unshift")},e.traverseBreathFirst=function(r){this._traverseBreathFirst(r)},e.traverseDepthFirst=function(r){this._traverseDepthFirst(r)},e.someBreathFirst=function(r){return Boolean(this._traverseBreathFirst(r,{some:!0,returnBoolean:!0}))},e.someDepthFirst=function(r){return Boolean(this._traverseDepthFirst(r,{some:!0,returnBoolean:!0}))},e.everyBreathFirst=function(r){return Boolean(this._traverseDepthFirst(r,{every:!0,returnBoolean:!0}))},e.everyDepthFirst=function(r){return Boolean(this._traverseDepthFirst(r,{every:!0,returnBoolean:!0}))},e.findOneBreathFirst=function(r){var t=this._traverseBreathFirst(r,{some:!0,returnArray:!0});return i(t)},e.findOneDepthFirst=function(r){var t=this._traverseDepthFirst(r,{some:!0,returnArray:!0});return i(t)},e.findAllBreathFirst=function(r){var t=this._traverseBreathFirst(r,{every:!0,returnArray:!0});return Array.isArray(t)?t:[]},e.findAllDepthFirst=function(r){var t=this._traverseDepthFirst(r,{every:!0,returnArray:!0});return Array.isArray(t)?t:[]},e.flatMap=function(r){void 0===r&&(r=null);var t=[];return this._traverseBreathFirst(function(n){r&&t.push(r(n))||t.push(n)}),t},e.flattenData=function(){return this.flatMap(r)},e.flattenByHeight=function(r){return void 0===r&&(r=null),u(this.root,r)},e.flattenDataByHeight=function(){return this.flattenByHeight(r)},e.widthsByHeight=function(){return a(this.root)},e.nodesAtHeight=function(r){var t=this.root?[1]:[],e=[this.root];if(t.length===r)return e;var i=[];do{for(;e.length;){var o,h=e.pop();n(h)&&(o=i).push.apply(o,h.children)}if(t.length===r)return i;i.length&&(t[t.length]=i.length);var a=[e,i];i=a[0],e=a[1]}while(e.length);return[]},e.countNodes=function(){return this.widthsByHeight().reduce(function(r,t){return r+t},0)},e.maxWidth=function(){return Math.max.apply(Math,this.widthsByHeight())},e.height=function(){return this.root?this.root.height():0},e.toJson=function(){return this.root?this.root.toJson():""},t}(),l=/*#__PURE__*/function(){function r(r,t){var n=void 0===t?{}:t,i=n.id,o=n.parent;this.data=void 0,this.children=[],this.id=void 0,this.value=void 0,this.label=void 0,this.parent=void 0,this.id=void 0!==i?i:e(),this.parent=o||null,this.value=i,this.label="label"in r?r.label:i,this.data=r,this.children=[]}var t=r.prototype;return t.addChild=function(t,n){var e=new r(t,{id:(void 0===n?{}:n).id,parent:this});return this.children.push(e),e},t._removeChildren=function(r){var t=[];return this.children=this.children.filter(function(n){return!r(n)||(t.push(n),!1)}),t},t.removeChildren=function(r){return this._removeChildren(r)},t.removeChildrenByData=function(r){return this._removeChildren(function(t){return t.data===r})},t.removeChildrenById=function(r){return this._removeChildren(function(t){return t.id===r})},t.isLeaf=function(){return null!==this.parent&&!Boolean(this.children.length)},t.hasChildren=function(){return Boolean(this.children.length)},t.toJson=function(){var r=h(this);return JSON.stringify(r)},t.depth=function(){if(this.parent){for(var r=0,t=this;t.parent;)r+=1,t=t.parent;return r}return 0},t.widthsByHeight=function(){return a(this)},t.height=function(){return this.widthsByHeight().length-1},t.flattenByHeight=function(r){return void 0===r&&(r=null),u(this,r)},r}(),d="id",f="parentId",v="children",c=function(r,t){var n=void 0===t?{}:t,e=n.idKey,i=void 0===e?d:e,o=n.parentIdKey,h=void 0===o?f:o,a=n.childrenKey,u=void 0===a?v:a,s=[],l={};return r.forEach(function(r){var t=r[i],n=r[h];l[t]=l[t]||[],r[u]=l[t],n?(l[n]=l[n]||[],l[n].push(r)):s.push(r)}),s},p=function(r,t,n){void 0===t&&(t=null);var e=void 0===n?{}:n,i=e.idKey,h=void 0===i?d:i,a=e.parentIdKey,u=e.childrenKey,s=o(r,{disallowedKeys:[h,void 0===a?f:a,void 0===u?v:u]});return t?t.addChild(s,{id:r[h]}):new l(s,{id:r[h]})},y=function r(t,n,e){if(void 0===n&&(n=null),void 0===e&&(e={}),t.length){var i=e.childrenKey,o=void 0===i?v:i;t.forEach(function(t){var i=p(t,n,e);r(t[o],i,e)})}},g=function(r,t){if(void 0===t&&(t={}),!r.length)return new s;if(r.length>1)throw new Error("Converting an array to tree only accepts an array with 0 or 1 node currently");var n=t.childrenKey,e=void 0===n?v:n,i=r[0],o=p(i,null,t),h=new s(o);return y(i[e],o,t),h},B=function(r,t){void 0===t&&(t={});var n=function(r,t){var n=void 0===t?{}:t,e=n.idKey,i=n.parentIdKey;if(e||i){var h=[].concat(e?[e]:[],i?[i]:[]);return r.map(function(r){var t=o(r,{disallowedKeys:h});return e&&(t[d]=r[e]),i&&(t[f]=r[i]),t})}return r}(r,t),e=c(n);if(e.length){if(e.length=1)return g(e);throw new Error("Converting an array to tree only accepts an array with 0 or 1 node currently")}return new s};export{l as Node,s as Tree,y as createNodes,c as createTreeArrayFromFlatArray,B as createTreeFromFlatArray,g as createTreeFromTreeArray,o as filterObject,i as firstArrayElement,e as generateId,n as hasChildren,r as nodeData,t as nodesData,p as objectToNode};
//# sourceMappingURL=index.mjs.map
