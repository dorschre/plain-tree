var t=function(t){return t&&"data"in t?t.data:t},r=function(r){return r.map(t)},n=function(t){return Boolean(t&&t.children&&t.children.length)},e=function(){return function(t){for(var r="";r.length<36;)r+=Math.random().toString(36).substring(2,15);return r.slice(0,36)}()},i=function(t){return Array.isArray(t)&&t.length?t[0]:null},o=function(t,r){var n=r.disallowedKeys,e=void 0===n?[]:n;return Object.keys(t).filter(function(t){return!e.includes(t)}).reduce(function(r,n){return r[n]=t[n],r},{})},h=function t(r){var n=r.parent,e={data:r.data,children:r.children,id:r.id,parentId:null,value:r.value,label:r.label};return n&&(e.parentId=n.id),e.children=r.children.map(function(r){return t(r)}),e},a=function t(r){var n=r.parent,e=r.children,i={data:r.data,id:r.id,parentId:null,value:r.value,label:r.label};return n&&(i.parentId=n.id),0!==e.length&&(i.children=r.children.map(function(r){return t(r)})),i},u=function(t){if(null===t)return[1];var r=[1],e=[t],i=[];do{for(;e.length;){var o,h=e.pop();n(h)&&(o=i).push.apply(o,h.children)}i.length&&(r[r.length]=i.length);var a=[e,i];i=a[0],e=a[1]}while(e.length);return r},l=function(t,r){void 0===r&&(r=null);var e=[t],i=[],o=[[r(t)]];do{for(;e.length;){var h,a=e.pop();n(a)&&(h=i).push.apply(h,a.children)}i.length&&(o[o.length]=r?i.map(function(t){return r(t)}):i);var u=[e,i];i=u[0],e=u[1]}while(e.length);return o},s=/*#__PURE__*/function(){function r(t){void 0===t&&(t=null),this.root=void 0,this.root=t,this.root=t}var e=r.prototype;return e._traverse=function(t,r,e){for(var i,o=void 0===r?{}:r,h=o.some,a=o.every,u=o.returnBoolean,l=o.returnArray,s=[this.root],d=[],c=!1;s.length;){var f=s.shift();if(n(f)&&s[e].apply(s,f.children),h||a){var v=t(f);if(v&&l&&d.push(f),a&&!v||h&&v){c=!0,i=v;break}}else t(f)}if(a){if(u)return!c;if(l)return d}else if(h){if(u)return Boolean(i);if(l)return d}},e._traverseBreathFirst=function(t,r){return this._traverse(t,r,"push")},e._traverseDepthFirst=function(t,r){return this._traverse(t,r,"unshift")},e.traverseBreathFirst=function(t){this._traverseBreathFirst(t)},e.traverseDepthFirst=function(t){this._traverseDepthFirst(t)},e.someBreathFirst=function(t){return Boolean(this._traverseBreathFirst(t,{some:!0,returnBoolean:!0}))},e.someDepthFirst=function(t){return Boolean(this._traverseDepthFirst(t,{some:!0,returnBoolean:!0}))},e.everyBreathFirst=function(t){return Boolean(this._traverseDepthFirst(t,{every:!0,returnBoolean:!0}))},e.everyDepthFirst=function(t){return Boolean(this._traverseDepthFirst(t,{every:!0,returnBoolean:!0}))},e.findOneBreathFirst=function(t){var r=this._traverseBreathFirst(t,{some:!0,returnArray:!0});return i(r)},e.findOneDepthFirst=function(t){var r=this._traverseDepthFirst(t,{some:!0,returnArray:!0});return i(r)},e.findAllBreathFirst=function(t){var r=this._traverseBreathFirst(t,{every:!0,returnArray:!0});return Array.isArray(r)?r:[]},e.findAllDepthFirst=function(t){var r=this._traverseDepthFirst(t,{every:!0,returnArray:!0});return Array.isArray(r)?r:[]},e.flatMap=function(t){void 0===t&&(t=null);var r=[];return this._traverseBreathFirst(function(n){t&&r.push(t(n))||r.push(n)}),r},e.flattenData=function(){return this.flatMap(t)},e.flattenByHeight=function(t){return void 0===t&&(t=null),l(this.root,t)},e.flattenDataByHeight=function(){return this.flattenByHeight(t)},e.widthsByHeight=function(){return u(this.root)},e.nodesAtHeight=function(t){var r=this.root?[1]:[],e=[this.root];if(r.length===t)return e;var i=[];do{for(;e.length;){var o,h=e.pop();n(h)&&(o=i).push.apply(o,h.children)}if(r.length===t)return i;i.length&&(r[r.length]=i.length);var a=[e,i];i=a[0],e=a[1]}while(e.length);return[]},e.countNodes=function(){return this.widthsByHeight().reduce(function(t,r){return t+r},0)},e.maxWidth=function(){return Math.max.apply(Math,this.widthsByHeight())},e.height=function(){return this.root?this.root.height():0},e.toJson=function(){return this.root?this.root.toJson():""},e.toObject=function(){return this.root?this.root.toObject():[]},r}(),d=/*#__PURE__*/function(){function t(t,r){var n=void 0===r?{}:r,i=n.id,o=n.parent;this.data=void 0,this.children=[],this.id=void 0,this.value=void 0,this.label=void 0,this.parent=void 0,this.id=void 0!==i?i:e(),this.parent=o||null,this.value=i,this.label="label"in t?t.label:i,this.data=t,this.children=[]}var r=t.prototype;return r.addChild=function(r,n){var e=new t(r,{id:(void 0===n?{}:n).id,parent:this});return this.children.push(e),e},r._removeChildren=function(t){var r=[];return this.children=this.children.filter(function(n){return!t(n)||(r.push(n),!1)}),r},r.removeChildren=function(t){return this._removeChildren(t)},r.removeChildrenByData=function(t){return this._removeChildren(function(r){return r.data===t})},r.removeChildrenById=function(t){return this._removeChildren(function(r){return r.id===t})},r.isLeaf=function(){return null!==this.parent&&!Boolean(this.children.length)},r.hasChildren=function(){return Boolean(this.children.length)},r.toJson=function(){var t=h(this);return JSON.stringify(t)},r.toObject=function(){var t=[];if(0!==this.children.length)for(var r=0;r<this.children.length;r++)t.push(a(this.children[r]));return t},r.depth=function(){if(this.parent){for(var t=0,r=this;r.parent;)t+=1,r=r.parent;return t}return 0},r.widthsByHeight=function(){return u(this)},r.height=function(){return this.widthsByHeight().length-1},r.flattenByHeight=function(t){return void 0===t&&(t=null),l(this,t)},t}(),c="id",f="parentId",v="children",p=function(t,r){var n=void 0===r?{}:r,e=n.idKey,i=void 0===e?c:e,o=n.parentIdKey,h=void 0===o?f:o,a=n.childrenKey,u=void 0===a?v:a,l=[],s={};return t.forEach(function(t){var r=t[i],n=t[h];s[r]=s[r]||[],t[u]=s[r],n?(s[n]=s[n]||[],s[n].push(t)):l.push(t)}),l},y=function(t,r,n){void 0===r&&(r=null);var e=void 0===n?{}:n,i=e.idKey,h=void 0===i?c:i,a=e.parentIdKey,u=e.childrenKey,l=o(t,{disallowedKeys:[h,void 0===a?f:a,void 0===u?v:u]});return r?r.addChild(l,{id:t[h]}):new d(l,{id:t[h]})},g=function t(r,n,e){if(void 0===n&&(n=null),void 0===e&&(e={}),r.length){var i=e.childrenKey,o=void 0===i?v:i;r.forEach(function(r){var i=y(r,n,e);t(r[o],i,e)})}},B=function(t,r){if(void 0===r&&(r={}),!t.length)return new s;if(t.length>1)throw new Error("Converting an array to tree only accepts an array with 0 or 1 node currently");var n=r.childrenKey,e=void 0===n?v:n,i=t[0],o=y(i,null,r),h=new s(o);return g(i[e],o,r),h},F=function(t,r){void 0===r&&(r={});var n=function(t,r){var n=void 0===r?{}:r,e=n.idKey,i=n.parentIdKey;if(e||i){var h=[].concat(e?[e]:[],i?[i]:[]);return t.map(function(t){var r=o(t,{disallowedKeys:h});return e&&(r[c]=t[e]),i&&(r[f]=t[i]),r})}return t}(t,r),e=p(n);if(e.length){if(e.length=1)return B(e);throw new Error("Converting an array to tree only accepts an array with 0 or 1 node currently")}return new s};export{d as Node,s as Tree,g as createNodes,p as createTreeArrayFromFlatArray,F as createTreeFromFlatArray,B as createTreeFromTreeArray,o as filterObject,i as firstArrayElement,e as generateId,n as hasChildren,t as nodeData,r as nodesData,y as objectToNode};
//# sourceMappingURL=index.mjs.map
